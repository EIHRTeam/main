# ===============================================
# pnpm 配置优化
# ===============================================

# === 依赖解析 ===
# 允许宽松的 peer dependencies 处理（避免安装警告）
strict-peer-dependencies=false
# 自动安装 peer dependencies
auto-install-peers=true
# 解决 peer dependencies 时优先使用已安装的版本
resolve-peers-from-workspace-root=true

# === 工作区配置 ===
# 工作区内的包优先链接（而不是从 registry 安装）
link-workspace-packages=true
# 允许工作区协议（workspace:*）
prefer-workspace-packages=true

# === 性能优化 ===
# 使用并行安装（默认已启用，显式设置以确保）
# 并行下载数量（默认 5）
network-concurrency=10
# 启用内容可寻址存储（默认启用）
# 使用硬链接减少磁盘占用（默认启用）

# === 兼容性 ===
# Node 版本严格检查（与 package.json 中的 engines 配合）
engine-strict=true
# 去重 peer dependencies
dedupe-peer-dependents=true

# === 安全 ===
# 安装时运行生命周期脚本的审计
# side-effects-cache=true

# === 提升配置 ===
# 提升特定包（如果遇到兼容性问题可取消注释）
# shamefully-hoist=true
# 只提升特定包（更精细的控制）
# public-hoist-pattern[]=*eslint*
# public-hoist-pattern[]=*prettier*

# === 镜像配置（可选） ===
# 使用国内镜像（提高国内下载速度）
# registry=https://registry.npmmirror.com

